# Enable URL rewriting
RewriteEngine On
RewriteBase /

# Force HTTPS
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Redirect root URL to public/index.php
DirectoryIndex public/index.php

# Block direct access to /public/ folder
RewriteRule ^public/(.*)$ /$1 [L,R=301]

# Hide /public/ folder in URLs
RewriteCond %{REQUEST_URI} !^/public/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ public/$1 [L]

# Remove .php extension for URLs
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+?)/?$ $1.php [L,QSA]

# Pretty URL for reports (/report/12 â†’ /report.php?id=12)
RewriteRule ^report/([0-9]+)/?$ report.php?id=$1 [L,QSA]

# Custom 404 page
ErrorDocument 404 /error.php
